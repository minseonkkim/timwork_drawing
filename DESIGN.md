## 데이터 분석

메타데이터를 `drawings -> disciplines -> regions/revisions` 계층으로 해석했습니다.
실제 탐색 단위는 다음과 같이 정의했습니다.

- 공간(도면) 선택
- 공종 선택
- (선택적) 영역 선택
- 리비전 선택

도면 데이터는 이미지 자체와 함께 `imageTransform`, `polygon`, `position` 같은 좌표계 정보를 포함하고 있으므로, 단순 이미지 렌더링이 아니라 맥락 기반 탐색 UI로 풀어야 한다고 판단했습니다.

해석 포인트는 아래와 같습니다.

- `position.vertices`: 전체 배치도에서 하위 공간의 클릭 가능한 영역입니다.
- `imageTransform.relativeTo`: 서로 다른 도면 이미지를 겹치기 위한 정렬 기준입니다.
- `polygon.vertices`: 공종/영역/리비전 관심 영역 시각화 데이터입니다.

특수 케이스(예: 주민공동시설 리비전 이미지 해상도 차이)는 기준 이미지(`relativeTo`)와 현재 이미지 크기 비율 보정으로 처리했습니다.

## 접근 방식

작업 순서는 아래와 같습니다.

1. 메타데이터 타입/유틸을 정리했습니다.
2. 필수 기능(탐색, 표시, 컨텍스트)을 우선 구현했습니다.
3. 사용자 시나리오 대응 기능(오버레이, 리비전, 배치도 진입)을 확장했습니다.
4. 뷰어 조작 UX(드래그 팬, 휠 줌, 중앙 정렬, 로딩 상태)를 개선했습니다.
5. 컴포넌트 분리로 구조를 정리했습니다.

## UI 설계 결정

### 선택한 레이아웃

고정 3열 레이아웃을 사용했습니다.

- 좌측: 도면 탐색(리스트 + 배치도 내비게이션)
- 중앙: 도면 뷰어(이미지/오버레이/폴리곤)
- 우측: 현재 컨텍스트/리비전 이력

선택 이유는 다음과 같습니다.

- 탐색, 검토, 판단 정보를 동시에 확인할 수 있습니다.
- 도면 리뷰 흐름(찾기 -> 보기 -> 판단)을 한 화면에서 유지할 수 있습니다.

### 고려했던 대안

- 단일 패널 + 모달 방식
  - 장점: 구현이 단순합니다.
  - 단점: 비교/맥락 확인 흐름이 끊깁니다.
- 트리 기반 탐색만 제공하는 방식
  - 장점: 구조 표현이 명확합니다.
  - 단점: 실제 공간 감각(배치도 기준 탐색)이 부족합니다.

결론적으로, 공간 중심 탐색을 강화하기 위해 배치도 클릭 진입을 기본 진입 UX로 선택했습니다.

## 기술 선택

- 상태 관리는 React 기본 훅(`useState`, `useMemo`, `useEffect`)으로 구성했습니다.
- 데이터 파싱/선택 로직은 `lib/metadata.ts`에 분리했습니다.
- 스타일은 Tailwind 유틸리티 클래스로 빠르게 구현했습니다.

## 구현 중 어려웠던 점

1. 서로 다른 이미지 해상도 간 좌표계 정렬

- 문제: 폴리곤이 화면 밖으로 밀리거나 어긋났습니다.
- 해결: 기준 이미지 대비 현재 이미지 스케일 보정을 적용했습니다.

2. 배치도/뷰어 상호작용과 컨텍스트 동기화

- 문제: 선택 상태가 많아질수록 UI 동기화 부담이 증가했습니다.
- 해결: 선택 우선순위와 파생 상태 계산을 명확히 분리했습니다.

3. 가시성/조작성 밸런스

- 문제: 정보량이 많아 컨트롤 영역이 쉽게 혼잡해졌습니다.
- 해결: 상단 컨트롤 컴팩트화, 줄바꿈 고정, 우측 패널 토글을 적용했습니다.

## 시간이 더 있다면 개선할 부분

- URL 쿼리 기반 상태 공유(회의/협업용 link)를 추가하겠습니다.
- 키보드 단축키(도면/리비전 빠른 이동)를 추가하겠습니다.
- 접근성(포커스 상태, 단축키 안내, 스크린리더 텍스트)을 개선하겠습니다.
